!function(t){"use strict"
function e(){function t(t,e){t.attr("transform",function(t){return"translate("+(e(t)+y)+", 0)"})}function e(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function n(t){var e=t[0],n=t[t.length-1]
return n>e?[e,n]:[n,e]}function r(t){for(var e=[],n=Math.ceil(t[0]);n<t[1];n++)e.push(n)
return e.length>0&&e[0]>0&&e.unshift(e[0]-(e[1]-e[0])),e}function a(t,e){return t.length<g||e%Math.ceil(t.length/g)===0}function i(t){return t<v.length?v[t]:t}function c(t){var e=i(t)
return x?x(e):e}function l(i){i.each(function(){var i=o.select(this),l=r(s.domain()),g=i.selectAll(".tick.major").data(l,String),x=g.enter().insert("g","path").attr("class","tick major").style("opacity",1e-6)
tickExit=o.transition(g.exit()).style("opacity",1e-6).remove(),tickUpdate=o.transition(g).style("opacity",1),tickX
var v=s.rangeExtent?s.rangeExtent():n(s.range()),m=i.selectAll(".domain").data([0])
m.enter().append("path").attr("class","domain")
var b=o.transition(m),w=s.copy(),k=this.__chart__||w
this.__chart__=w,x.append("line"),x.append("text")
var A=x.select("line"),M=tickUpdate.select("line"),E=g.select("text"),_=x.select("text"),O=tickUpdate.select("text")
switch(y=(w(1)-w(0))/2,tickX=h?0:y,u){case"bottom":tickTransform=t,A.attr("y2",d),_.attr("y",Math.max(d,0)+p),M.attr("x1",tickX).attr("x2",tickX).attr("y2",d),O.attr("x",0).attr("y",Math.max(d,0)+p),E.attr("dy",".71em").style("text-anchor","middle"),E.text(function(t){return a(l,t)?c(t):""}),b.attr("d","M"+v[0]+","+f+"V0H"+v[1]+"V"+f)
break
case"left":tickTransform=e,A.attr("x2",-d),_.attr("x",-(Math.max(d,0)+p)),M.attr("x2",-d).attr("y2",0),O.attr("x",-(Math.max(d,0)+p)).attr("y",y),E.attr("dy",".32em").style("text-anchor","end"),E.text(function(t){return a(l,t)?c(t):""}),b.attr("d","M"+-f+","+v[0]+"H0V"+v[1]+"H"+-f)}if(s.ticks)x.call(tickTransform,k),tickUpdate.call(tickTransform,w),tickExit.call(tickTransform,w)
else{var D=w.rangeBand()/2,z=function(t){return w(t)+D}
x.call(tickTransform,z),tickUpdate.call(tickTransform,z)}})}var s=o.scale.linear(),u="bottom",d=6,f=6,p=3,h=!1,g=10,y=0,x=null,v=[]
return l.scale=function(t){return arguments.length?(s=t,l):s},l.orient=function(t){return arguments.length?(u=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",l):u},l.categories=function(t){return arguments.length?(v=t,l):v},l.tickCentered=function(t){return arguments.length?(h=t,l):h},l.tickTextNum=function(t){return arguments.length?(g=t,l):g},l.tickFormat=function(t){return arguments.length?(x=t,l):x},l.tickOffset=function(){return y},l.ticks=function(){},l}function n(t){return t||0===t}function r(t){return void 0===t}function a(t){return void 0!==t}var i=t.c3={},o=t.d3
i.generate=function(i){function c(t,e){if(!(t in i))throw Error(e)}function l(t,e){for(var n=i,r=0;r<t.length;r++){if(!(t[r]in n))return e
n=n[t[r]]}return n}function s(){Nr=f(),jr=p(),_r={top:0,left:(Ga?ka+ji:0)+h(),bottom:20+(Ga?0:ka)+_i,right:g()},zr=Nr-_r.left-_r.right,Ur=jr-_r.top-_r.bottom,Or={top:Ga?_r.top:jr-ka-_i,left:Ga?Ni:_r.left,bottom:20+_i,right:0/0},Tr=Ga?_r.left-Ni-ji:zr,Sr=Ga?Ur:jr-Or.top-Or.bottom,Dr={top:jr-_i,right:0/0,bottom:0,left:_r.left},Xr=jr-Dr.top-Dr.bottom,u()}function u(){Rr=Ur/2,Lr=.95*Rr,Yr=un(ur.data.targets)?.6*Lr:0}function d(){var t=Hi.property("offsetLeft")
return t?t:0}function f(){return yr?yr:x()}function p(){var t=xr?xr:v()
return t>0?t:320}function h(){return vr?vr:Ra?1:y("y")}function g(){return mr?mr:Ia?Va||Ga?1:y("y2"):1}function y(){return 40}function x(){return+o.select(gr).style("width").replace("px","")}function v(){return+o.select(gr).style("height").replace("px","")}function m(){return zr+2+_r.left+_r.right}function b(){return 40}function w(){return _r.left+20}function k(){return Ur-_r.top+2}function A(){var t=Ga?Ur:zr,e=K(),n=ye()
return n>1?t*e/(n-1):t}function M(){var t,e
Pr=Ga?1:0,Cr=Ga?Ur:zr,Vr=Ga?0:Ur,Br=Ga?zr:1,Kr=Pr,Wr=Cr,Gr=Ga?0:Sr,Jr=Ga?Tr:1,Qr=_(Pr,Cr,Qr?Qr.domain():void 0,function(){return ra.tickOffset()}),Zr=O(Vr,Br,Zr?Zr.domain():void 0),$r=O(Vr,Br,$r?$r.domain():void 0),ta=_(Pr,Cr,Gi,function(t){return t%1?0:oa.tickOffset()}),ea=O(Gr,Jr),na=O(Gr,Jr),t=X(),e=N(),ra=T(Qr,zi,t,e),oa=T(ta,Si,t,e),aa=U(Zr,Ti,Ya,qa),ia=U($r,Ui,Ba,Wa),E()}function E(){Fr=L(),qr=R(),Ir=R(.98)}function _(t,e,n,i){var c=(bi?o.time.scale():o.scale.linear()).range([t,e])
if(c.orgDomain=function(){return c.domain()},a(n)&&c.domain(n),r(i)&&(i=function(){return 0}),wi){var l,s=c
c=function(t){return s(t)+i(t)}
for(l in s)c[l]=s[l]
c.orgDomain=function(){return s.domain()},c.domain=function(t){return arguments.length?(s.domain(t),c):(t=s.domain(),[t[0],t[1]+1])}}return c}function O(t,e){return o.scale.linear().range([t,e])}function D(t){return"y2"===S(t)?$r:Zr}function z(t){return"y2"===S(t)?na:ea}function T(t,n,r,a){var i=(wi?e():o.svg.axis()).scale(t).orient(n)
return i.tickFormat(r).ticks(a),wi?i.categories(Da).tickCentered(za):i.tickOffset=function(){var t=Ga?Ur:zr
return t*K()/ye()/2},i}function U(t,e,n,r){return o.svg.axis().scale(t).orient(e).tickFormat(n).ticks(r).outerTickSize(0)}function S(t){return t in pa?pa[t]:"y"}function X(){var t=bi?Di:wi?Ee:null
return Ta&&("function"==typeof Ta?t=Ta:bi&&(t=function(t){return o.time.format(Ta)(t)})),t}function N(){var t=ye()
return 10>t?t:10}function j(t){var e=!1
return Hr(ur.data.targets).forEach(function(n){return e||n.data.id!==t.data.id?void 0:(e=!0,t=n,void 0)}),e?t:null}function L(){var t=o.svg.arc().outerRadius(Lr).innerRadius(Yr),e=function(e,n){var r
return n?t(e):(r=j(e),r?t(r):"M 0 0")}
return e.centroid=t.centroid,e}function R(t){var e=o.svg.arc().outerRadius(Rr*(t?t:1)).innerRadius(Yr)
return function(t){var n=j(t)
return n?e(n):"M 0 0"}}function Y(t,e){return vn(t.data)?Fr(t,e):"M 0 0"}function F(t){var e,n,r,a,i=j(t),o=""
return i&&(e=Fr.centroid(i),n=e[0],r=e[1],a=Math.sqrt(n*n+r*r),o="translate("+n/a*Lr*.8+","+r/a*Lr*.8+")"),o}function q(t){return(t.endAngle-t.startAngle)/(2*Math.PI)}function I(t){return ui(t,q(t))}function H(t,e){var n=Hi.selectAll(".chart-arc"+cr(t)),r=Hi.selectAll(".-arc").filter(function(e){return e.data.id!==t})
n.selectAll("path").transition().duration(50).attr("d",qr).transition().duration(100).attr("d",Ir).each(function(t){xn(t.data)}),e||r.style("opacity",.3)}function P(t){var e=Hi.selectAll(".chart-arc"+cr(t))
e.selectAll("path").transition().duration(50).attr("d",Fr),Hi.selectAll(".-arc").style("opacity",1)}function C(t){var e,n,r,a,i,c=we(t)
if(fa.length>0)for(i=Ae(t),e=0;e<fa.length;e++)for(r=fa[e][0],i&&c[r]&&c[r].forEach(function(t,e){c[r][e]=0>t?t:0}),n=1;n<fa[e].length;n++)a=fa[e][n],c[a]&&c[a].forEach(function(t,e){S(a)!==S(r)||!c[r]||i&&+t>0||(c[r][e]+=+t)})
return o.min(Object.keys(c).map(function(t){return o.min(c[t])}))}function V(t){var e,n,r,a,i,c=we(t)
if(fa.length>0)for(i=Me(t),e=0;e<fa.length;e++)for(r=fa[e][0],i&&c[r]&&c[r].forEach(function(t,e){c[r][e]=t>0?t:0}),n=1;n<fa[e].length;n++)a=fa[e][n],c[a]&&c[a].forEach(function(t,e){S(a)!==S(r)||!c[r]||i&&0>+t||(c[r][e]+=+t)})
return o.max(Object.keys(c).map(function(t){return o.max(c[t])}))}function B(t){var e=be(function(e){return S(e.id)===t}),r="y2"===t?Pa:Na,a="y2"===t?Ha:Xa,i=r?r:C(e),o=a?a:V(e),c=.1*Math.abs(o-i),l=c,s=c,u="y2"===t?Ca:ja
if(u){var d=Math.max(Math.abs(i),Math.abs(o))
o=d-u,i=u-d}return"y"===t&&Fa&&(l=n(Fa.top)?Fa.top:c,s=n(Fa.bottom)?Fa.bottom:c),"y2"===t&&Ka&&(l=n(Ka.top)?Ka.top:c,s=n(Ka.bottom)?Ka.bottom:c),cn(e)&&!Ae(e)&&(s=i),[i-s,o+l]}function K(t){return t?1:Z(Gi)/Z(Qr.domain())}function W(t){return t[0].values[0].x}function G(t){return 1===t.length?t[0].values[t[0].values.length-1].x:2===t.length?t[1].values[t[0].values.length-1].x:void 0}function J(t,e){var n,r=e[0],a=e[1],i=Math.abs(r-a)
return n=wi?0:cn(t)?i/(ye()-1)/2:.01*i}function Q(t){var e=[W(t),G(t)],n=e[0],r=e[1],a=J(t,e),i=bi?new Date(n.getTime()-a):n-a,o=bi?new Date(r.getTime()+a):r+a
return[i,o]}function Z(t){return t[1]-t[0]}function $(t){for(var e=0;e<t.length;e++)if(!(t[e]in dr))return!1
return!0}function te(t,e){dr[t]=pe(e)}function ee(t){for(var e=[],n=0;n<t.length;n++)t[n]in dr&&e.push(pe(dr[t[n]]))
return e}function ne(t){return"start"in t?Qr(bi?kn(t.start):t.start):0}function re(t){var e=ne(t),n="end"in t?Qr(bi?kn(t.end):t.end):zr,r=n-e
return 0>r?0:r}function ae(t){return ca&&t===ca||la&&_n(la,t)}function ie(t){return!ae(t)}function oe(t){return ca?ca:la?la[t]:null}function ce(t,e){return t in ur.data.x&&ur.data.x[t]&&ur.data.x[t][e]?ur.data.x[t][e]:e}function le(t){Object.keys(t).forEach(function(e){la[e]=t[e]})}function se(t){var e
return t&&(e=da[t.id],t.name=e?e:t.id),t}function ue(t){var e,n,r=t[0],a={},i=[]
for(e=1;e<t.length;e++){for(a={},n=0;n<t[e].length;n++)a[r[n]]=t[e][n]
i.push(a)}return i}function de(t){var e,n,a,i=[]
for(e=0;e<t.length;e++)for(a=t[e][0],n=1;n<t[e].length;n++)r(i[n-1])&&(i[n-1]={}),i[n-1][a]=t[e][n]
return i}function fe(e){var n,r=o.keys(e[0]).filter(ie),a=o.keys(e[0]).filter(ae)
return bi&&0===a.length?(t.alert('data.x or data.xs must be specified when axis.x.type == "timeseries"'),[]):(ki&&r.forEach(function(t){var n=oe(t)
ur.data.x[t]=a.indexOf(n)>=0?e.map(function(t){return t[n]}):ur.data.x[Object.keys(ur.data.x)[0]]}),n=r.map(function(t){var n=ua(t)
return{id:n,id_org:t,values:e.map(function(e,r){var a,i=oe(t)
return a=bi?kn(e[i]):ki?e[i]?+e[i]:ce(t,r):r,e.x=a,{x:a,value:null===e[t]||isNaN(e[t])?null:+e[t],id:n}})}}),n.forEach(function(t){var e
t.values=t.values.sort(function(t,e){var n=t.x||0===t.x?t.x:1/0,r=e.x||0===e.x?e.x:1/0
return n-r}),e=0,t.values.forEach(function(t){t.index=e++})}),ha&&rn(ve(n).filter(function(t){return!(t in ga)}),ha),n.forEach(function(t){te(t.id_org,t)}),n)}function pe(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}}function he(t){return t>0&&ur.data.targets[0].values[t-1]?ur.data.targets[0].values[t-1].x:void 0}function ge(t){return t<ye()-1?ur.data.targets[0].values[t+1].x:void 0}function ye(){return o.max(ur.data.targets,function(t){return t.values.length})}function xe(){var t,e=ur.data.targets.length,n=0
return e>1?ur.data.targets.forEach(function(e){e.values.length>n&&(t=e,n=e.values.length)}):t=e?ur.data.targets[0]:null,t}function ve(t){return t=r(t)?ur.data.targets:t,t.map(function(t){return t.id})}function me(t){var e,n=ve()
for(e=0;e<n.length;e++)if(n[e]===t)return!0
return!1}function be(t){return a(t)?ur.data.targets.filter(t):ur.data.targets}function we(t){var e={}
return t.forEach(function(t){e[t.id]=[],t.values.forEach(function(n){e[t.id].push(n.value)})}),e}function ke(t,e){var n,r,a,i=Object.keys(t)
for(n=0;n<i.length;n++)for(a=t[i[n]].values,r=0;r<a.length;r++)if(e(a[r].value))return!0
return!1}function Ae(t){return ke(t,function(t){return 0>t})}function Me(t){return ke(t,function(t){return t>0})}function Ee(t){return t<Da.length?Da[t]:t}function _e(t){return"-shapes -shapes-"+t.id}function Oe(t){return _e(t)+" -line -line-"+t.id}function De(t){return _e(t)+" -circles -circles-"+t.id}function ze(t){return _e(t)+" -bars -bars-"+t.id}function Te(t){return _e(t.data)+" -arc -arc-"+t.data.id}function Ue(t){return _e(t)+" -area -area-"+t.id}function Se(t,e){return"-shape -shape-"+e}function Xe(t,e){return Se(t,e)+" -circle -circle-"+e}function Ne(t,e){return Se(t,e)+" -bar -bar-"+e}function je(t,e){return"region region-"+e+" "+("classes"in t?[].concat(t.classes).join(" "):"")}function Le(t,e){return"event-rect event-rect-"+e}function Re(t){return n(t.value)?gn(t)?.5:1:0}function Ye(t){return t?Qr(t.x):null}function Fe(t){return Qr(bi?kn(t.value):t.value)}function qe(t){return Zr(t.value)}function Ie(t){return ta(t.x)}function He(t,e){var n,r=t[e].x,a=[]
for(n=e-1;n>=0&&r===t[n].x;n--)a.push(t[n])
for(n=e;n<t.length&&r===t[n].x;n++)a.push(t[n])
return a}function Pe(t,e,n,r){var a,i=n?n:0,o=r?r:t.length-1,c=Math.floor((o-i)/2)+i,l=t[c],s=Qr(l.x)-e[0]
return s>0?o=c:i=c,o-i===1?(a=[],t[i].x&&(a=a.concat(He(t,i))),t[o].x&&(a=a.concat(He(t,o))),Ve(a,e)):Pe(t,e,i,o)}function Ce(t,e){var n
return n=t.map(function(t){return Pe(t.values,e)}),Ve(n,e)}function Ve(t,e){var n,r
return t.forEach(function(t){var a=On(t,e);(n>a||!n)&&(n=a,r=t)}),r}function Be(t,e){var r,a,i,o,c,l,s,u=t.filter(function(t){return t&&n(t.value)})
pi&&0!==u.length&&(Ki.html(hi(t)).style("visibility","hidden").style("display","block"),r=Ki.property("offsetWidth"),a=Ki.property("offsetHeight"),Ga?o=e[0]:(i=d(),o=i+h()+Qr(u[0].x)+20,c=o+r,s=i+f()-g(),c>s&&(o-=r+60)),l=e[1]+15+a<p()?e[1]+15:e[1]-a,Ki.style("top",l-45+"px").style("left",o+30+"px").style("visibility","visible"))}function Ke(){Ki.style("display","none")}function We(t){var e=t.filter(function(t){return t&&n(t.value)})
pi&&(ln(ur.data.targets)||dn(ur.data.targets)||Ci.selectAll("line.xgrid-focus").style("visibility","visible").data([e[0]]).attr(Ga?"y1":"x1",Ye).attr(Ga?"y2":"x2",Ye))}function Ge(){Ci.select("line.xgrid-focus").style("visibility","hidden")}function Je(t){return t.x||0===t.x?Qr(t.x):null}function Qe(t){return D(t.id)(t.value)}function Ze(){var t,e,n={},a=0
return be(hn).forEach(function(i){for(t=0;t<fa.length;t++)if(!(fa[t].indexOf(i.id)<0))for(e=0;e<fa[t].length;e++)if(fa[t][e]in n){n[i.id]=n[fa[t][e]]
break}r(n[i.id])&&(n[i.id]=a++)}),n.__max__=a-1,n}function $e(t,e,n,r){var a=r?ta:Qr
return e?function(r){var i=r.id in n?n[r.id]:0
return r.x||0===r.x?a(r.x)-t*(e/2-i):0}:function(){return 0}}function tn(t){return function(e){var n=t?z(e.id):D(e.id)
return n(e.value)}}function en(t,e){var n=Object.keys(t)
return function(r,a){var i=e?z(r.id):D(r.id),o=i(0),c=o
return be(hn).forEach(function(e){e.id!==r.id&&t[e.id]===t[r.id]&&n.indexOf(e.id)<n.indexOf(r.id)&&e.values[a].value*r.value>0&&(c+=i(e.values[a].value)-o)}),c}}function nn(t,e){return e?2*t.tickOffset()*.6/e:0}function rn(t,e){var n=r(t)?ve():t
"string"==typeof n&&(n=[n])
for(var a=0;a<n.length;a++)Qi[n[a]]=e===ga[n[a]],ga[n[a]]=e}function an(t,e){var n=!1
return t.forEach(function(t){ga[t.id]===e&&(n=!0),t.id in ga||"line"!==e||(n=!0)}),n}function on(t){return Qi[t.id]?1:0}function cn(t){return an(t,"bar")}function ln(t){return an(t,"scatter")}function sn(t){return an(t,"pie")}function un(t){return an(t,"donut")}function dn(t){return sn(t)||un(t)}function fn(t){var e="string"==typeof t?t:t.id
return!(e in ga)||"line"===ga[e]||"spline"===ga[e]||"area"===ga[e]||"area-spline"===ga[e]}function pn(t){var e="string"==typeof t?t:t.id
return"spline"===ga[e]||"area-spline"===ga[e]}function hn(t){var e="string"==typeof t?t:t.id
return"bar"===ga[e]}function gn(t){var e="string"==typeof t?t:t.id
return"scatter"===ga[e]}function yn(t){var e="string"==typeof t?t:t.id
return"pie"===ga[e]}function xn(t){var e="string"==typeof t?t:t.id
return"donut"===ga[e]}function vn(t){return yn(t)||xn(t)}function mn(t){return hn(t)?t.values:[]}function bn(t){return fn(t)||gn(t)?t.values:[]}function wn(t,e){var n=[],r=t,a=null!==e?e:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"]
return function(e){return e in r?t[e]:(-1===n.indexOf(e)&&n.push(e),a[n.indexOf(e)%a.length])}}function kn(t){var e
if(!t)throw Error(t+" can not be parsed as d3.time with format "+sa+". Maybe 'x' of this data is not defined. See data.x or data.xs option.")
if(e=o.time.format(sa).parse(t),!e)throw Error("Failed to parse '"+t+"' with format "+sa)
return e}function An(t,e){var n=o.mouse(t),r=o.select(t),a=1*r.attr("cx"),i=1*r.attr("cy")
return Math.sqrt(Math.pow(a-n[0],2)+Math.pow(i-n[1],2))<e}function Mn(t){var e=o.mouse(t),n=o.select(t),r=1*n.attr("x"),a=1*n.attr("y"),i=1*n.attr("width"),c=r-10,l=r+i+10,s=a-10
return c<e[0]&&e[0]<l&&s<e[1]}function En(t,e){var n
for(n=0;n<e.length;n++)if(e[n].start<t&&t<=e[n].end)return!0
return!1}function _n(t,e){var n=!1
return Object.keys(t).forEach(function(r){t[r]===e&&(n=!0)}),n}function On(t,e){return Math.pow(Qr(t.x)-e[0],2)+Math.pow(Zr(t.value)-e[1],2)}function Dn(t,e,n){li(t,e),Ci.select(".selected-circles-"+e.id).selectAll(".selected-circle-"+n).data([e]).enter().append("circle").attr("class",function(){return"selected-circle selected-circle-"+n}).attr("cx",Ga?Qe:Je).attr("cy",Ga?Je:Qe).attr("stroke",function(){return Oi(e.id)}).attr("r",1.4*oi).transition().duration(100).attr("r",oi)}function zn(t,e,n){si(t,e),Ci.select(".selected-circles-"+e.id).selectAll(".selected-circle-"+n).transition().duration(100).attr("r",0).remove()}function Tn(t,e,n,r){t?Dn(e,n,r):zn(e,n,r)}function Un(){}function Sn(){}function Xn(t,e,n,r){t?Un(e,n,r):Sn(e,n,r)}function Nn(t){return t.filter(function(t){return n(t.value)})}function jn(t,e){return(e?Ci.selectAll(".-circles-"+e):Ci).selectAll(".-circle"+(n(t)?"-"+t:""))}function Ln(t,e){jn(t,e).classed(fr,!0).attr("r",ii)}function Rn(t){jn(t).filter(function(){return o.select(this).classed(fr)}).classed(fr,!1).attr("r",ni)}function Yn(t){return Ci.selectAll(".-bar"+(n(t)?"-"+t:""))}function Fn(t){Yn(t).classed(fr,!1)}function qn(t){Yn(t).classed(fr,!1)}function In(t,e,n,i){var o,c,l,s,u,d,f,p,h,g,y,x=-1,v="M",m=[]
if(a(i))for(o=0;o<i.length;o++)m[o]={},m[o].start=r(i[o].start)?t[0].x:bi?kn(i[o].start):i[o].start,m[o].end=r(i[o].end)?t[t.length-1].x:bi?kn(i[o].end):i[o].end
for(g=Ga?function(t){return n(t.value)}:function(t){return e(t.x)},y=Ga?function(t){return e(t.x)}:function(t){return n(t.value)},l=bi?function(t,r,a,i){var o=t.x.getTime(),c=r.x-t.x,l=new Date(o+c*a),s=new Date(o+c*(a+i))
return"M"+e(l)+" "+n(u(a))+" "+e(s)+" "+n(u(a+i))}:function(t,r,a,i){return"M"+e(s(a))+" "+n(u(a))+" "+e(s(a+i))+" "+n(u(a+i))},o=0;o<t.length;o++){if(r(m)||!En(t[o].x,m))v+=" "+g(t[o])+" "+y(t[o])
else{s=_(t[o-1].x,t[o].x),u=O(t[o-1].value,t[o].value),d=e(t[o].x)-e(t[o-1].x),f=n(t[o].value)-n(t[o-1].value),p=Math.sqrt(Math.pow(d,2)+Math.pow(f,2)),h=2/p
var b=2*h
for(c=h;1>=c;c+=b)v+=l(t[o-1],t[o],c,h)}x=t[o].x}return v}function Hn(e){var n,r,a,i,c
if(Wi=o.select(gr),Wi.empty())return t.alert('No bind element found. Check the selector specified by "bindto" and existance of that element. Default "bindto" is "#chart".'),void 0
if(Wi.html(""),ur.data.x={},ur.data.targets=fe(e),s(),M(),Qr.domain(o.extent(Q(ur.data.targets))),Zr.domain(B("y")),$r.domain(B("y2")),ta.domain(Qr.domain()),ea.domain(Zr.domain()),na.domain($r.domain()),Gi=Qr.domain(),Li.scale(ta),br&&Ii.scale(Qr),Hi=o.select(gr).append("svg").attr("width",zr+_r.left+_r.right).attr("height",Ur+_r.top+_r.bottom).on("mouseenter",Ar).on("mouseleave",Mr),Pi=Hi.append("defs"),Pi.append("clipPath").attr("id",vi).append("rect").attr("y",_r.top).attr("width",zr).attr("height",Ur-_r.top),Pi.append("clipPath").attr("id","xaxis-clip").append("rect").attr("x",-1-_r.left).attr("y",-20).attr("width",m).attr("height",b),Pi.append("clipPath").attr("id","yaxis-clip").append("rect").attr("x",-_r.left+1).attr("y",_r.top-1).attr("width",w).attr("height",k),Ci=Hi.append("g").attr("transform","translate(58,0)"),Vi=wa?Hi.append("g").attr("transform",Xi.context):null,Bi=Ma?Hi.append("g").attr("transform",Xi.legend):null,Ki=o.select(gr).style("position","relative").append("div").style("position","absolute").style("z-index","10").style("display","none"),Ci.append("g").attr("class","x axis").attr("clip-path",Ga?"":"url("+document.URL+"#xaxis-clip)").attr("transform",Xi.x).call(Ga?aa:ra).append("text").attr("class","-axis-x-label").attr("x",zr).attr("dy","-.5em").style("text-anchor","end").text(Sa),Ci.append("g").attr("class","y axis").attr("clip-path",Ga?"url("+document.URL+"#yaxis-clip)":"").call(Ga?ra:aa).append("text").attr("transform","rotate(-90)").attr("dy","1.2em").attr("dx","-.5em").style("text-anchor","end").text(La),Ia&&Ci.append("g").attr("class","y2 axis").attr("transform",Xi.y2).call(ia),r=Ci.append("g").attr("clip-path",mi).attr("class","grid"),Ja&&r.append("g").attr("class","xgrids"),Za&&(a=r.append("g").attr("class","xgrid-lines").selectAll(".xgrid-line").data(Za).enter().append("g").attr("class","xgrid-line"),a.append("line").attr("class",function(t){return""+t["class"]}),a.append("text").attr("class",function(t){return""+t["class"]}).attr("text-anchor","end").attr("transform",Ga?"":"rotate(-90)").attr("dx",Ga?0:-_r.top).attr("dy",-5).text(function(t){return t.text})),ri&&r.append("g").attr("class","xgrid-focus").append("line").attr("class","xgrid-focus").attr("x1",Ga?0:-10).attr("x2",Ga?zr:-10).attr("y1",Ga?-10:_r.top).attr("y2",Ga?-10:Ur),$a&&r.append("g").attr("class","ygrids"),ti&&(i=r.append("g").attr("class","ygrid-lines").selectAll("ygrid-line").data(ti).enter().append("g").attr("class","ygrid-line"),i.append("line").attr("class",function(t){return""+t["class"]}),i.append("text").attr("class",function(t){return""+t["class"]}).attr("text-anchor","end").attr("transform",Ga?"rotate(-90)":"").attr("dx",Ga?0:-_r.top).attr("dy",-5).text(function(t){return t.text})),Ci.append("g").attr("clip-path",mi).attr("class","regions"),Ci.append("g").attr("clip-path",mi).attr("class","chart"),n=Ci.select(".chart").append("g").attr("class","event-rects").style("fill-opacity",0).style("cursor",br?Ga?"ns-resize":"ew-resize":null),Ci.select(".chart").append("g").attr("class","chart-bars"),Ci.select(".chart").append("g").attr("class","chart-lines"),Ci.select(".chart").append("g").attr("class","chart-arcs").attr("transform",Xi.arc).append("text").attr("class","chart-arcs-title").style("text-anchor","middle").text(di),br&&Ci.insert("rect",kr?null:"g.grid").attr("class","zoom-rect").attr("width",zr).attr("height",Ur).style("opacity",0).style("cursor",Ga?"ns-resize":"ew-resize").call(Ii).on("dblclick.zoom",null),null!==Ua&&Li.extent("function"!=typeof Ua?Ua:Ua(Q())),wa&&(Vi.append("g").attr("clip-path",mi).attr("class","chart"),Vi.select(".chart").append("g").attr("class","chart-bars"),Vi.select(".chart").append("g").attr("class","chart-lines"),Vi.append("g").attr("clip-path",mi).attr("class","x brush").call(Li).selectAll("rect").attr(Ga?"width":"height",Ga?Tr:Sr),Vi.append("g").attr("class","x axis").attr("transform",Xi.subx).attr("clip-path",Ga?"url("+document.URL+"#yaxis-clip)":"").call(oa)),Ma&&ir(ur.data.targets),tr(ur.data.targets),Gn({withTransform:!0,withUpdateXDomain:!0}),gi){if(bi&&"string"==typeof yi){for(yi=kn(yi),c=0;c<ur.data.targets[0].values.length&&ur.data.targets[0].values[c].x-yi!==0;c++);yi=c}Ki.html(hi(ur.data.targets.map(function(t){return se(t.values[yi])}))),Ki.style("top",xi.top).style("left",xi.left).style("display","block")}null==t.onresize&&(t.onresize=Zn()),t.onresize.add&&t.onresize.add($n)}function Pn(t){t.append("rect").attr("class",Le).style("cursor",va&&ma?"pointer":null).on("mouseover",function(t,e){if(!Mi&&!dn(ur.data.targets)){var n,r,a=ur.data.targets.map(function(t){return se(t.values[e])})
if(Object.keys(da).length>0){r=[]
for(var i in da)for(n=0;n<a.length;n++)if(a[n].id===i){r.push(a[n]),a.shift(n)
break}a=r.concat(a)}ai&&Ln(e),Fn(e),We(a)}}).on("mouseout",function(t,e){dn(ur.data.targets)||(Ge(),Ke(),Rn(e),qn())}).on("mousemove",function(t,e){var n
Mi||dn(ur.data.targets)||(n=ur.data.targets.map(function(t){return se(t.values[e])}),Be(n,o.mouse(this)),va&&(ma||Ci.selectAll(".-shape-"+e).filter(function(t){return ba(t)}).each(function(){var t=o.select(this).classed(fr,!0)
"circle"===this.nodeName&&t.attr("r",ii),Hi.select(".event-rect-"+e).style("cursor",null)}).filter(function(){var t=o.select(this)
return"circle"===this.nodeName?An(this,oi):"rect"===this.nodeName?Mn(this,t.attr("x"),t.attr("y")):void 0}).each(function(){var t=o.select(this)
t.classed(fr)||(t.classed(fr,!0),"circle"===this.nodeName&&t.attr("r",oi)),Hi.select(".event-rect-"+e).style("cursor","pointer")})))}).on("click",function(t,e){return dn(ur.data.targets)?void 0:Ei?(Ei=!1,void 0):(Ci.selectAll(".-shape-"+e).each(function(t){Vn(this,t,e)}),void 0)}).call(o.behavior.drag().origin(Object).on("drag",function(){Bn(o.mouse(this))}).on("dragstart",function(){Kn(o.mouse(this))}).on("dragend",function(){Wn()})).call(Ii).on("dblclick.zoom",null)}function Cn(t){t.append("rect").attr("x",0).attr("y",0).attr("width",zr).attr("height",Ur).attr("class","event-rect").on("mouseout",function(){dn(ur.data.targets)||(Ge(),Ke(),Rn())}).on("mousemove",function(){var t,e,n
Mi||dn(ur.data.targets)||(t=o.mouse(this),e=Ce(ur.data.targets,t),n=[se(e)],Be(n,t),ai&&(Rn(),Ln(e.index,e.id)),We(n),On(e,t)<100?Hi.select(".event-rect").style("cursor","pointer"):Hi.select(".event-rect").style("cursor",null))}).on("click",function(){var t,e
dn(ur.data.targets)||(t=o.mouse(this),e=Ce(ur.data.targets,t),On(e,t)<100&&Ci.select(".-circles-"+e.id).select(".-circle-"+e.index).each(function(){Vn(this,e,e.index)}))}).call(o.behavior.drag().origin(Object).on("drag",function(){Bn(o.mouse(this))}).on("dragstart",function(){Kn(o.mouse(this))}).on("dragend",function(){Wn()})).call(Ii).on("dblclick.zoom",null)}function Vn(t,e,n){var r,a=o.select(t),i=a.classed(pr),c=!1
"circle"===t.nodeName?(c=An(t,1.5*oi),r=Tn):"rect"===t.nodeName&&(c=Mn(t),r=Xn),(ma||c)&&(va&&ba(e)&&(a.classed(pr,!i),r(!i,a,e,n)),ci(e,a))}function Bn(t){var e,n,r,a,i,c,l,s
dn(ur.data.targets)||va&&(!br||Ii.altDomain)&&(e=Ai[0],n=Ai[1],r=t[0],a=t[1],i=Math.min(e,r),c=Math.max(e,r),l=ma?_r.top:Math.min(n,a),s=ma?Ur:Math.max(n,a),Ci.select(".dragarea").attr("x",i).attr("y",l).attr("width",c-i).attr("height",s-l),Ci.selectAll(".-shapes").selectAll(".-shape").filter(function(t){return ba(t)}).each(function(t,e){var n,r,a,u,d=o.select(this),f=d.classed(pr),p=d.classed(hr),h=!1
"circle"===this.nodeName?(n=1*d.attr("cx"),r=1*d.attr("cy"),u=Tn,h=n>i&&c>n&&r>l&&s>r):"rect"===this.nodeName&&(n=1*d.attr("x"),r=1*d.attr("y"),a=1*d.attr("width"),u=Xn,h=n+a>i&&c>n&&s>r),h^p&&(d.classed(hr,!p),d.classed(pr,!f),u(!f,d,t,e))}))}function Kn(t){dn(ur.data.targets)||va&&(Ai=t,Ci.select(".chart").append("rect").attr("class","dragarea").style("opacity",.1),Mi=!0)}function Wn(){dn(ur.data.targets)||va&&(Ci.select(".dragarea").transition().duration(100).style("opacity",0).remove(),Ci.selectAll(".-shape").classed(hr,!1),Mi=!1)}function Gn(t){var e,r,i,c,l,s,u,d,f,p,h,g,y,x,v,m,b,w,k,M,E=Ze(),_=dn(ur.data.targets)
if(t=a(t)?t:{},x=a(t.withY)?t.withY:!0,v=a(t.withSubchart)?t.withSubchart:!0,m=a(t.withTransition)?t.withTransition:!0,b=a(t.withTransform)?t.withTransform:!1,w=a(t.withUpdateXDomain)?t.withUpdateXDomain:!1,k=a(t.withUpdateOrgXDomain)?t.withUpdateOrgXDomain:!1,M=m?Er:0,k&&(Qr.domain(o.extent(Q(ur.data.targets))),Gi=Qr.domain(),br&&Ii.scale(Qr).updateScaleExtent(),ta.domain(Qr.domain()),Li.scale(ta)),w&&(Qr.domain(Li.empty()?Gi:Li.extent()),br&&Ii.scale(Qr).updateScaleExtent()),Zr.domain(B("y")),$r.domain(B("y2")),Ci.select(".x.axis").style("opacity",_?0:1).transition().duration(Ga?M:0).call(Ga?aa:ra),Ci.select(".y.axis").style("opacity",_?0:1).transition().duration(Ga?0:M).call(Ga?ra:aa),Ci.select(".y2.axis").style("opacity",_?0:1).transition().call(ia),Ci.select(".x.axis .-axis-x-label").attr("x",zr),ea.domain(Zr.domain()),na.domain($r.domain()),Ki.style("display","none"),Ci.select("line.xgrid-focus").style("visibility","hidden").attr("y2",Ur),Ja){if("year"===Qa){r=[]
for(var O=Q(),D=O[0].getFullYear(),z=O[1].getFullYear(),T=D;z>=T;T++)r.push(new Date(T+"-01-01 00:00:00"))}else r=Qr.ticks(10)
e=Ci.select(".xgrids").selectAll(".xgrid").data(r),e.enter().append("line").attr("class","xgrid"),e.attr("x1",Ga?0:function(t){return Qr(t)-ra.tickOffset()}).attr("x2",Ga?zr:function(t){return Qr(t)-ra.tickOffset()}).attr("y1",Ga?function(t){return Qr(t)-ra.tickOffset()}:_r.top).attr("y2",Ga?function(t){return Qr(t)-ra.tickOffset()}:Ur).style("opacity",function(){return+o.select(this).attr(Ga?"y1":"x1")===(Ga?Ur:0)?0:1}),e.exit().remove()}Za&&(i=Ci.selectAll(".xgrid-lines"),i.selectAll("line").transition().duration(M).attr("x1",Ga?0:Fe).attr("x2",Ga?zr:Fe).attr("y1",Ga?Fe:_r.top).attr("y2",Ga?Fe:Ur),i.selectAll("text").attr("x",Ga?zr:0).attr("y",Fe)),x&&$a&&(c=Ci.select(".ygrids").selectAll(".ygrid").data(Zr.ticks(10)),c.enter().append("line").attr("class","ygrid"),c.attr("x1",Ga?Zr:0).attr("x2",Ga?Zr:zr).attr("y1",Ga?0:Zr).attr("y2",Ga?Ur:Zr),c.exit().remove()),x&&ti&&(l=Ci.select(".ygrid-lines"),l.selectAll("line").transition().duration(M).attr("x1",Ga?qe:0).attr("x2",Ga?qe:zr).attr("y1",Ga?0:qe).attr("y2",Ga?Ur:qe),l.selectAll("text").attr("x",Ga?0:zr).attr("y",qe)),u=Ci.selectAll(".-bars").selectAll(".-bar").data(mn),u.enter().append("path").attr("d",Fi(E,!1)).style("stroke","none").style("opacity",0).style("fill",function(t){return Oi(t.id)}).attr("class",Ne),u.style("opacity",on).transition().duration(M).attr("d",Fi(E,!1)).style("opacity",1),u.exit().transition().duration(M).style("opacity",0).remove(),Ci.selectAll(".-line").style("opacity",on).transition().duration(M).attr("d",Ri).style("opacity",1),Ci.selectAll(".-area").style("opacity",0).transition().duration(M).attr("d",Yi).style("opacity",Ji),s=Ci.selectAll(".-circles").selectAll(".-circle").data(bn),s.enter().append("circle").attr("class",Xe).style("opacity",0).attr("r",ni),s.style("opacity",on).transition().duration(M).style("opacity",Re).attr("cx",Ga?Qe:Je).attr("cy",Ga?Je:Qe),s.exit().remove(),Ci.selectAll(".chart-arc").select(".-arc").attr("transform",b?"scale(0)":"").style("opacity",function(t){return t===this._current?0:1}).transition().duration(M).attrTween("d",function(t){var e=j(t)
if(!e)return function(){return"M 0 0"}
var n=o.interpolate(this._current,e)
return this._current=n(0),function(t){return Y(n(t),!0)}}).attr("transform",b?"scale(1)":"").style("opacity",1),Ci.selectAll(".chart-arc").select("text").attr("transform",F).style("opacity",0).transition().duration(M).text(I).style("opacity",function(t){return vn(t.data)?1:0}),Ci.select(".chart-arcs-title").style("opacity",un(ur.data.targets)?1:0),wa&&(null!==o.event&&"zoom"===o.event.type&&Li.extent(Qr.orgDomain()).update(),v&&(Vi.select(".x.axis").style("opacity",_?0:1).transition().duration(Ga?M:0).call(oa),Li.empty()||Li.extent(Qr.orgDomain()).update(),f=Vi.selectAll(".-bars").selectAll(".-bar").data(mn),f.enter().append("path").attr("d",Fi(E)).style("stroke","none").style("fill",function(t){return Oi(t.id)}).attr("class",Ne),f.style("opacity",on).transition().duration(M).attr("d",Fi(E)).style("opacity",1),f.exit().transition().duration(M).style("opacity",0).remove(),Vi.selectAll(".-line").style("opacity",on).transition().duration(M).attr("d",qi).style("opacity",1))),Ci.selectAll(".selected-circles").filter(function(t){return hn(t)}).selectAll("circle").remove(),Ci.selectAll(".selected-circle").transition().duration(M).attr("cx",Ga?Qe:Je).attr("cy",Ga?Je:Qe),la?(p=Ci.select(".event-rects").selectAll(".event-rect").data([0]),Cn(p.enter()),p.attr("x",0).attr("y",0).attr("width",zr).attr("height",Ur)):(ki?(y=function(t,e){var n=he(e),r=ge(e)
return(Qr(r?r:t.x+50)-Qr(n?n:t.x-50))/2},g=function(t,e){var n=he(e)
return(Qr(t.x)+Qr(n?n:t.x-50))/2}):(y=A(),g=function(t){return Qr(t.x)-y/2}),h=xe(),Ci.select(".event-rects").datum(h?h.values:[]),p=Ci.select(".event-rects").selectAll(".event-rect").data(function(t){return t}),Pn(p.enter()),p.attr("class",Le).attr("x",Ga?0:g).attr("y",Ga?g:0).attr("width",Ga?zr:y).attr("height",Ga?y:Ur),p.exit().remove()),d=Ci.select(".regions").selectAll("rect.region").data(fi),d.enter().append("rect").style("fill-opacity",0),d.attr("class",je).attr("x",Ga?0:ne).attr("y",Ga?ne:_r.top).attr("width",Ga?zr:re).attr("height",Ga?re:Ur).transition().duration(M).style("fill-opacity",function(t){return n(t.opacity)?t.opacity:.1}),d.exit().transition().duration(M).style("fill-opacity",0).remove(),ve().forEach(function(t){Qi[t]=!0})}function Jn(){Gn({withTransition:!1,withY:!1,withSubchart:!1,withUpdateXDomain:!0})}function Qn(){return"mousemove"===o.event.sourceEvent.type&&Ii.altDomain?(Qr.domain(Ii.altDomain),Ii.scale(Qr).updateScaleExtent(),void 0):(wi&&Qr.orgDomain()[0]===Gi[0]&&Qr.domain([Gi[0]-1e-10,Qr.orgDomain()[1]]),Gn({withTransition:!1,withY:!1,withSubchart:!1}),"mousemove"===o.event.sourceEvent.type&&(Ei=!0),void 0)}function Zn(){function t(){e.forEach(function(t){t()})}var e=[]
return t.add=function(t){e.push(t)},t}function $n(){s(),M(),Li.scale(ta),br&&Ii.scale(Qr),Hi.attr("width",Nr).attr("height",jr),Hi.select("#"+vi).select("rect").attr("width",zr).attr("height",Ur),Hi.select("#xaxis-clip").select("rect").attr("width",m),Hi.select(".zoom-rect").attr("width",zr).attr("height",Ur),Ci.select(".x.axis").attr("transform",Xi.x),Ci.select(".y2.axis").attr("transform",Xi.y2),Ci.select(".chart-arcs").attr("transform",Xi.arc),wa&&(Vi.attr("transform",Xi.context),Vi.select(".x.axis").attr("transform",Xi.subx)),Ma&&(Bi.attr("transform",Xi.legend),ir(ur.data.targets,{withTransition:!1})),Gn({withTransition:!1,withUpdateXDomain:!0})}function tr(t){var e,n,r,a,i,c,l,s,u,d
a=Ci.select(".chart-bars").selectAll(".chart-bar").data(t),r=a.enter().append("g").attr("class",function(t){return"chart-bar target target-"+t.id}).style("pointer-events","none"),r.append("g").attr("class",ze).style("fill",function(t){return Oi(t.id)}).style("stroke","none").style("cursor",function(t){return ba(t)?"pointer":null}),n=Ci.select(".chart-lines").selectAll(".chart-line").data(t),e=n.enter().append("g").attr("class",function(t){return"chart-line target target-"+t.id}).style("pointer-events","none"),e.append("path").attr("class",Oe).style("opacity",0).style("stroke",function(t){return Oi(t.id)}),e.append("path").attr("class",Ue).style("opacity",function(){return Ji=+o.select(this).style("opacity"),0}).style("fill",function(t){return Oi(t.id)}),e.append("g").attr("class",function(t){return"selected-circles selected-circles-"+t.id}),e.append("g").attr("class",De).style("fill",function(t){return Oi(t.id)}).style("cursor",function(t){return ba(t)?"pointer":null}),t.forEach(function(t){var e=or(t.id)
Ci.selectAll(".selected-circles"+e).selectAll(".selected-circle").each(function(e){e.value=t.values[e.x].value})}),c=Ci.select(".chart-arcs").selectAll(".chart-arc").data(Hr(t)),i=c.enter().append("g").attr("class",function(t){return"chart-arc target target-"+t.data.id}),i.append("path").attr("class",Te).style("opacity",0).style("fill",function(t){return Oi(t.data.id)}).style("cursor",function(t){return ba(t)?"pointer":null}).each(function(t){this._current=t}).on("mouseover",function(t){H(t.data.id),nr(t.data.id)}).on("mouseout",function(t){P(t.data.id),ar()}),i.append("text").attr("dy",".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none"),wa&&(d=Vi.select(".chart-bars").selectAll(".chart-bar").data(t),u=d.enter().append("g").attr("class",function(t){return"chart-bar target target-"+t.id}),u.append("g").attr("class",ze).style("fill",function(t){return Oi(t.id)}),s=Vi.select(".chart-lines").selectAll(".chart-line").data(t),l=s.enter().append("g").attr("class",function(t){return"chart-line target target-"+t.id}),l.append("path").attr("class",Oe).style("opacity",0).style("stroke",function(t){return Oi(t.id)})),Ma&&ir(t),Hi.selectAll(".target").transition().style("opacity",1)}function er(t,e){ur.data.targets.forEach(function(e){for(var n=0;n<t.length;n++)if(e.id===t[n].id){e.values=t[n].values,t.splice(n,1)
break}}),ur.data.targets=ur.data.targets.concat(t),tr(ur.data.targets),Gn({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}),e()}function nr(t){var e=Hi.selectAll(".legend-item"),n=function(e){return!t||e===t},r=function(t){return!n(t)}
e.filter(r).transition().duration(100).style("opacity",.3),e.filter(n).transition().duration(100).style("opacity",1)}function rr(t){var e=Hi.selectAll(".legend-item"),n=function(e){return!t||e===t},r=function(t){return!n(t)}
e.filter(r).transition().duration(100).style("opacity",1),e.filter(n).transition().duration(100).style("opacity",.3)}function ar(){Hi.selectAll(".legend-item").transition().duration(100).style("opacity",1)}function ir(t,e){var n,i,o=ve(t),c=zr/2-Ea*Object.keys(t).length/2
e=r(e)?{}:e,i=a(e.withTransition)?e.withTransition:!0,n=Bi.selectAll(".legend-item").data(o).enter().append("g").attr("class",function(t){return"legend-item legend-item-"+t}).style("cursor","pointer").on("click",function(t){_a(t)}).on("mouseover",function(t){nr(t),ur.focus(t)}).on("mouseout",function(){ar(),ur.revert()}),n.append("rect").attr("class","legend-item-event").style("fill-opacity",0).attr("x",-200).attr("y",-205).attr("width",Ea).attr("height",24),n.append("rect").attr("class","legend-item-tile").style("pointer-events","none").style("fill",function(t){return Oi(t)}).attr("x",-200).attr("y",-205).attr("width",10).attr("height",10),n.append("text").text(function(t){return a(da[t])?da[t]:t}).style("pointer-events","none").attr("x",-200).attr("y",-196),Bi.selectAll("rect.legend-item-event").data(o).transition().duration(i?250:0).attr("x",function(t,e){return c+Ea*e}),Bi.selectAll("rect.legend-item-tile").data(o).transition().duration(i?250:0).attr("x",function(t,e){return c+Ea*e}),Bi.selectAll("text").data(o).transition().duration(i?250:0).attr("x",function(t,e){return c+Ea*e+14})}function or(t){return t?"-"+t.replace(/\./g,"\\."):""}function cr(t){return".target"+or(t)}function lr(t){return me(t.id)}function sr(t){return"data"in t&&me(t.data.id)}var ur={data:{}},dr={},fr="_expanded_",pr="_selected_",hr="_included_",gr=l(["bindto"],"#chart"),yr=l(["size","width"],null),xr=l(["size","height"],null),vr=l(["padding","left"],null),mr=l(["padding","right"],null),br=l(["zoom","enabled"],!1),wr=l(["zoom","extent"],null),kr=l(["zoom","privileged"],!1),Ar=l(["onenter"],function(){}),Mr=l(["onleave"],function(){}),Er=l(["transition","duration"],350)
c("data","data is required in config")
var _r,Or,Dr,zr,Tr,Ur,Sr,Xr,Nr,jr,Lr,Rr,Yr,Fr,qr,Ir,Hr,Pr,Cr,Vr,Br,Kr,Wr,Gr,Jr,Qr,Zr,$r,ta,ea,na,ra,aa,ia,oa,ca=l(["data","x"],null),la=l(["data","xs"],null),sa=l(["data","x_format"],"%Y-%m-%d"),ua=l(["data","id_converter"],function(t){return t}),da=l(["data","names"],{}),fa=l(["data","groups"],[]),pa=l(["data","axes"],{}),ha=l(["data","type"],null),ga=l(["data","types"],{}),ya=l(["data","regions"],{}),xa=l(["data","colors"],{}),va=l(["data","selection","enabled"],!1),ma=l(["data","selection","grouped"],!1),ba=l(["data","selection","isselectable"],function(){return!0}),wa=l(["subchart","show"],!1),ka=wa?l(["subchart","size","height"],60):0,Aa=l(["color","pattern"],null),Ma=l(["legend","show"],!0),Ea=l(["legend","item","width"],105),_a=l(["legend","item","onclick"],function(){}),Oa=l(["axis","x","type"],"indexed"),Da=l(["axis","x","categories"],[]),za=l(["axis","x","tick","centered"],!1),Ta=l(["axis","x","tick","format"],null),Ua=l(["axis","x","default"],null),Sa=l(["axis","x","label"],null),Xa=l(["axis","y","max"],null),Na=l(["axis","y","min"],null),ja=l(["axis","y","center"],null),La=l(["axis","y","label"],null),Ra=l(["axis","y","inner"],!1),Ya=l(["axis","y","tick","format"],null),Fa=l(["axis","y","padding"],null),qa=l(["axis","y","ticks"],10),Ia=l(["axis","y2","show"],!1),Ha=l(["axis","y2","max"],null),Pa=l(["axis","y2","min"],null),Ca=l(["axis","y2","center"],null),Va=l(["axis","y2","inner"],!1),Ba=l(["axis","y2","tick","format"],null),Ka=l(["axis","y2","padding"],null),Wa=l(["axis","y2","ticks"],10),Ga=l(["axis","rotated"],!1),Ja=l(["grid","x","show"],!1),Qa=l(["grid","x","type"],"tick"),Za=l(["grid","x","lines"],null),$a=l(["grid","y","show"],!1),ti=l(["grid","y","lines"],null),ei=l(["point","show"],!0),ni=ei?l(["point","r"],2.5):0,ri=l(["point","focus","line","enabled"],!0),ai=l(["point","focus","expand","enabled"],!0),ii=l(["point","focus","expand","r"],ai?4:ni),oi=l(["point","focus","select","r"],8),ci=l(["point","onclick"],function(){}),li=l(["point","onselected"],function(){}),si=l(["point","onunselected"],function(){}),ui=l(["arc","label","format"],function(t,e){return(100*e).toFixed(1)+"%"}),di=l(["arc","title"],""),fi=l(["regions"],[]),pi=l(["tooltip","enabled"],!0),hi=l(["tooltip","contents"],function(t){var e,r,a,i,o,c=Ya?Ya:function(t){return+t},l=X()
for(r=0;r<t.length;r++)t[r]&&n(t[r].value)&&(e||(a=l?l(t[r].x):t[r].x,e="<table class='-tooltip'><tr><th colspan='2'>"+a+"</th></tr>"),o=t[r].name,i=c(t[r].value),e+="<tr class='-tooltip-name-"+t[r].id+"'><td class='name'><span style='background-color:"+Oi(t[r].id)+"'></span>"+o+"</td><td class='value'>"+i+"</td></tr>")
return e+"</table>"}),gi=l(["tooltip","init","show"],!1),yi=l(["tooltip","init","x"],0),xi=l(["tooltip","init","position"],{top:"0px",left:"50px"}),vi=gr.replace("#","")+"-clip",mi="url("+document.URL+"#"+vi+")",bi="timeseries"===Oa,wi="categorized"===Oa,ki=!bi&&(ca||la),Ai=null,Mi=!1,Ei=!1,_i=Ma?40:0,Oi=wn(xa,Aa),Di=function(){var t=[[o.time.format("%Y/%-m/%-d"),function(){return!0}],[o.time.format("%-m/%-d"),function(t){return t.getMonth()}],[o.time.format("%-m/%-d"),function(t){return 1!==t.getDate()}],[o.time.format("%-m/%-d"),function(t){return t.getDay()&&1!==t.getDate()}],[o.time.format("%I %p"),function(t){return t.getHours()}],[o.time.format("%I:%M"),function(t){return t.getMinutes()}],[o.time.format(":%S"),function(t){return t.getSeconds()}],[o.time.format(".%L"),function(t){return t.getMilliseconds()}]]
return function(e){for(var n=t.length-1,r=t[n];!r[1](e);)r=t[--n]
return r[0](e)}}(),zi=Ga?"left":"bottom",Ti=Ga?Ra?"top":"bottom":Ra?"right":"left",Ui=Ga?Va?"bottom":"top":Va?"left":"right",Si=Ga?"left":"bottom",Xi={main:function(){return"translate("+_r.left+","+_r.top+")"},context:function(){return"translate("+Or.left+","+Or.top+")"},legend:function(){return"translate("+Dr.left+","+Dr.top+")"},y2:function(){return"translate("+(Ga?0:zr)+","+(Ga?10:0)+")"},x:function(){return"translate(0,"+Ur+")"},subx:function(){return"translate(0,"+(Ga?0:Sr)+")"},arc:function(){return"translate("+zr/2+","+Ur/2+")"}},Ni=40,ji=20
Hr=o.layout.pie().value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)})
var Li,Ri=function(){var t=o.svg.line().x(Ga?function(t){return D(t.id)(t.value)}:Ye).y(Ga?Ye:function(t){return D(t.id)(t.value)})
return function(e){var n,r,a=Nn(e.values)
return fn(e)?(pn(e)?t.interpolate("cardinal"):t.interpolate("linear"),ya[e.id]?In(a,Qr,D(e.id),ya[e.id]):t(a)):(n=Qr(a[0].x),r=D(e.id)(a[0].value),Ga?"M "+r+" "+n:"M "+n+" "+r)}}(),Yi=function(){var t
return t=Ga?o.svg.area().x0(function(t){return D(t.id)(0)}).x1(function(t){return D(t.id)(t.value)}).y(Ye):o.svg.area().x(Ye).y0(function(t){return D(t.id)(0)}).y1(function(t){return D(t.id)(t.value)}),function(e){var n,r,a=Nn(e.values)
return an([e],"area")||an([e],"area-spline")?(pn(e)?t.interpolate("cardinal"):t.interpolate("linear"),t(a)):(n=Qr(a[0].x),r=D(e.id)(a[0].value),Ga?"M "+r+" "+n:"M "+n+" "+r)}}(),Fi=function(t,e){var n=t.__max__+1,r=arguments.length>1?e:!0,a=nn(ra,n),i=$e(a,n,t,!!r),o=tn(!!r),c=en(t,!!r),l=r?z:D
return function(t,e){var n=l(t.id)(0),r=c(t,e)||n,s=[[i(t),r],[i(t),o(t)-(n-r)],[i(t)+a,o(t)-(n-r)],[i(t)+a,r]],u=Ga?1:0,d=Ga?0:1,f="M "+s[0][u]+","+s[0][d]+" L"+s[1][u]+","+s[1][d]+" L"+s[2][u]+","+s[2][d]+" L"+s[3][u]+","+s[3][d]+" z"
return f}},qi=function(){var t=o.svg.line().x(Ga?function(t){return z(t.id)(t.value)}:Ie).y(Ga?Ie:function(t){return z(t.id)(t.value)})
return function(e){var n=Nn(e.values)
return fn(e)?t(n):"M "+ta(n[0].x)+" "+z(e.id)(n[0].value)}}(),Ii=function(){}
Li=o.svg.brush().on("brush",Jn),Li.update=function(){return Vi&&Vi.select(".x.brush").call(this),this},Li.scale=function(t){return Ga?this.y(t):this.x(t)},br&&(Ii=o.behavior.zoom().on("zoomstart",function(){Ii.altDomain=o.event.sourceEvent.altKey?Qr.orgDomain():null}).on("zoom",br?Qn:null),Ii.scale=function(t){return Ga?this.y(t):this.x(t)},Ii.orgScaleExtent=function(){var t=wr?wr:[1,10]
return[t[0],Math.max(ye()/t[1],t[1])]},Ii.updateScaleExtent=function(){var t=Z(Qr.orgDomain())/Z(Gi),e=this.orgScaleExtent()
return this.scaleExtent([e[0]*t,e[1]*t]),this})
var Hi,Pi,Ci,Vi,Bi,Ki,Wi,Gi,Ji,Qi={}
if(ur.focus=function(t){function e(t){t.transition().duration(100).style("opacity",1)}var n=Hi.selectAll(cr(t)),r=n.filter(lr),a=n.filter(sr)
ur.revert(),ur.defocus(),e(r.classed("focused",!0)),e(a),dn(ur.data.targets)&&H(t,!0),nr(t)},ur.defocus=function(t){function e(t){t.transition().duration(100).style("opacity",.3)}var n=Hi.selectAll(cr(t)),r=n.filter(lr),a=n.filter(sr)
ur.revert(),e(r.classed("focused",!1)),e(a),dn(ur.data.targets)&&P(t),rr(t)},ur.revert=function(t){function e(t){t.transition().duration(100).style("opacity",1)}var n=Hi.selectAll(cr(t)),r=n.filter(lr),a=n.filter(sr)
e(r.classed("focused",!1)),e(a),dn(ur.data.targets)&&P(t),ar()},ur.show=function(t){Hi.selectAll(cr(t)).transition().style("opacity",1)},ur.hide=function(t){Hi.selectAll(cr(t)).transition().style("opacity",0)},ur.unzoom=function(){Li.clear().update(),Gn({withUpdateXDomain:!0})},ur.load=function(t){if("function"!=typeof t.done&&(t.done=function(){}),t.xs&&le(t.xs),"categories"in t&&wi&&(Da=t.categories,ra.categories(Da)),"cacheIds"in t&&$(t.cacheIds))return er(ee(t.cacheIds),t.done),void 0
if("data"in t)er(fe(t.data),t.done)
else if("url"in t)o.csv(t.url,function(e,n){er(fe(n),t.done)})
else if("rows"in t)er(fe(ue(t.rows)),t.done)
else{if(!("columns"in t))throw Error("url or rows or columns is required.")
er(fe(de(t.columns)),t.done)}},ur.unload=function(t){ur.data.targets=ur.data.targets.filter(function(e){return e.id!==t}),Hi.selectAll(cr(t)).transition().style("opacity",0).remove(),Ma&&(Hi.selectAll(".legend-item"+or(t)).remove(),ir(ur.data.targets)),ur.data.targets.length>0&&Gn({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})},ur.selected=function(t){var e=or(t)
return o.merge(Ci.selectAll(".-shapes"+e).selectAll(".-shape").filter(function(){return o.select(this).classed(pr)}).map(function(t){return t.map(function(t){return t.__data__})}))},ur.select=function(t,e,n){va&&Ci.selectAll(".-shapes").selectAll(".-shape").each(function(i,c){var l="circle"===this.nodeName?Dn:Un,s="circle"===this.nodeName?zn:Sn
e.indexOf(c)>=0?ba(i)&&(ma||r(t)||t.indexOf(i.id)>=0)&&l(o.select(this).classed(pr,!0),i,c):a(n)&&n&&s(o.select(this).classed(pr,!1),i,c)})},ur.unselect=function(t,e){va&&Ci.selectAll(".-shapes").selectAll(".-shape").each(function(n,a){var i="circle"===this.nodeName?zn:Sn;(r(e)||e.indexOf(a)>=0)&&ba(n)&&(ma||r(t)||t.indexOf(n.id)>=0)&&i(o.select(this).classed(pr,!1),n,a)})},ur.toLine=function(t){rn(t,"line"),Gn()},ur.toSpline=function(t){rn(t,"spline"),Gn()},ur.toBar=function(t){rn(t,"bar"),Gn()},ur.toScatter=function(t){rn(t,"scatter"),Gn()},ur.toArea=function(t){rn(t,"area"),Gn()},ur.toAreaSpline=function(t){rn(t,"area-spline"),Gn()},ur.toPie=function(t){rn(t,"pie"),u(),E(),Gn({withTransform:!0})},ur.toDonut=function(t){rn(t,"donut"),u(),E(),Gn({withTransform:!0})},ur.groups=function(t){return r(t)?fa:(fa=t,Gn(),fa)},ur.regions=function(t){return r(t)?fi:(fi=t,Gn(),fi)},ur.regions.add=function(t){return r(t)?fi:(fi=fi.concat(t),Gn(),fi)},ur.regions.remove=function(t,e){var r=[].concat(t)
return e=a(e)?e:{},r.forEach(function(t){var r=n(e.duration)?e.duration:0
Hi.selectAll("."+t).transition().duration(r).style("fill-opacity",0).remove(),fi=fi.filter(function(e){return e.classes.indexOf(t)<0})}),fi},ur.data.get=function(t){var e=ur.data.getAsTarget(t)
return a(e)?e.values.map(function(t){return t.value}):void 0},ur.data.getAsTarget=function(t){var e=be(function(e){return e.id===t})
return e.length>0?e[0]:void 0},ur.resize=function(t){yr=t?t.width:null,xr=t?t.height:null,$n()},ur.destroy=function(){ur.data.targets=void 0,ur.data.x={},Wi.html(""),t.onresize=null},"url"in i.data)o.csv(i.data.url,function(t,e){Hn(e)})
else if("rows"in i.data)Hn(ue(i.data.rows))
else{if(!("columns"in i.data))throw Error("url or rows or columns is required.")
Hn(de(i.data.columns))}return ur}}(window)
